<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia Site Renderer 1.3 at Apr 23, 2015 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Maven - Cache Benchmarking</title>
    <style type="text/css" media="all">
      @import url("./css/maven-base.css");
      @import url("./css/maven-theme.css");
      @import url("./css/site.css");
    </style>
    <link rel="stylesheet" href="./css/print.css" type="text/css" media="print" />
      <meta name="author" content="Pandian Velayutham" />
    <meta name="Date-Revision-yyyymmdd" content="20150423" />
    <meta http-equiv="Content-Language" content="en" />
        
        </head>
  <body class="composite">
    <div id="banner">
                                      <a href="./" id="bannerLeft">
                                                <img src="images/connex_logo.png" alt="Maven" />
                </a>
                          <div id="bannerRight">
                                                <img src="images/connex_logo_h71.png" alt="Maven" />
                </div>
            <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
            
            
                <div class="xleft">
        <span id="publishDate">Last Published: 2015-04-23</span>
                  &nbsp;| <span id="projectVersion">Version: 1.0-SNAPSHOT</span>
                      </div>
            <div class="xright">        
            
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
             
            
                                <h5>Cache Implementation</h5>
                  <ul>
                  <li class="none">
            <strong>Bench Marking</strong>
          </li>
          </ul>
                       <h5>Project Documentation</h5>
                  <ul>
                                                                                                                                                                                                                                      <li class="collapsed">
                          <a href="project-info.html" title="Project Information">Project Information</a>
                  </li>
                                                                                                                                                                                                                                                                          <li class="collapsed">
                          <a href="project-reports.html" title="Project Reports">Project Reports</a>
                  </li>
          </ul>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="poweredBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                   
            
            </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <div class="section"><h2>Introduction<a name="Introduction"></a></h2><p>Purpose of this document is to outline steps taken to determine best cache implementation for configuration management.</p></div><div class="section"><h2>Requirement<a name="Requirement"></a></h2><p>Following are basic requirements which needs to be addressed as part of design.</p><ul><li>Centralized configuration management</li><li>One tool to admin configuration</li><li>Performance should not be affected</li><li>Configuration changes need to get effective immediate or near immediate</li><li>No service/component outage</li></ul></div><div class="section"><h2>Design Options<a name="Design_Options"></a></h2><p>Following design options have been considered</p><div class="section"><h3>In-memory Cache (ehCache &amp; infinispan embedded)<a name="In-memory_Cache_ehCache__infinispan_embedded"></a></h3><p>EhCache and Infinispan caches can be used as in-memory cache and widely used by multiple framework including Hibernate. Implemented as below within Connex product.</p><img src="./images/inmemorycache.jpg" alt="in-memory cache" /></div><div class="section"><h3>Standalone distributed Cache<a name="Standalone_distributed_Cache"></a></h3><p>Infinispan standalone implementation has been taken for benchmarking, since this supports out-of-box rest interface and easy to install/maintain. Implemented as below within Connex product.</p><img src="./images/distributedstandalone.jpg" alt="distributed stand-alone cache" /></div><div class="section"><h3>Embedded data-grid (infinispan)<a name="Embedded_data-grid_infinispan"></a></h3><p>Infinispan forms cluster of distributed in-memory cache to achieve performance and avoid making external call overhead. This will be very helpful when there is large data which needs to be shared between distributed application. Infinispan takes care of replicating/distributing data between cluster that helps enterprise application focus on business logic. Implemented as below within Connex product.</p><img src="./images/embeddeddatagrid.jpg" alt="embedded data-grid cache" /></div><div class="section"><h3>Stand-alone facility database access<a name="Stand-alone_facility_database_access"></a></h3><p>This is not an option we would like to implement, but considered this for benchmarking with external cache approaches.</p><img src="./images/standalonefacilitydatabase.jpg" alt="Stand alone facility database" /></div><div class="section"><h3>Centralized database access (corporate facility)<a name="Centralized_database_access_corporate_facility"></a></h3><p>This is not an option we would like to implement, but considered this for benchmarking with external cache approaches. In this scenario database resides at corporate</p><img src="./images/corporatedatabase.jpg" alt="Stand alone facility database" /></div></div><div class="section"><h2>BenchMarking<a name="BenchMarking"></a></h2><p>To determine best approach each design has been validated with requirement and one of the requirement is to see very little performance degradation. This has been measured with JMeter Java Sampler which does 10 threads with 1000 test execution. Each test reads 10 configuration values from memory.<br /><b>Note:</b> This metrics collection does not include loading data into cache</p><table border="1" class="bodyTable"><caption>Benchmarking data</caption><tr class="a"><td align="center">Type of Implementation</td><td align="center">Total elapsed time (ms)</td><td align="center">Average time (ms per 10 configuration)</td></tr><tr class="b"><td align="center">ehcache</td><td align="right">394</td><td align="right">0.0394</td></tr><tr class="a"><td align="center">stand alone</td><td align="right">306609</td><td align="right">30.6609</td></tr><tr class="b"><td align="center">facility database</td><td align="right">317090</td><td align="right">31.7090</td></tr><tr class="a"><td align="center">corp database</td><td align="right">1550589</td><td align="right">155.0727</td></tr><tr class="b"><td align="center">infinispan embedded</td><td align="right">494</td><td align="right">0.0494</td></tr><tr class="a"><td align="center">infinispan embedded data grid</td><td align="right">101</td><td align="right">0.0101</td></tr></table><hr /><img src="./images/benchmarksummary.jpg" alt="BenchMarking graph" /></div><div class="section"><h2>Conclusion<a name="Conclusion"></a></h2><p>Based on above performance number and requirements in-memory cache would be better solution for configuration management at this time. We also considered memory foot print impact because of in-memory cache, based on analysis provided ( <a class="externalLink" href="http://blog.infinispan.org/2013/01/infinispan-memory-overhead.html ">Link</a> ) it will increase memory foot print by 1MB maximum for configuration management within each class loader and that is very small increase.</p></div>
      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">
              Copyright &#169;                   2015.
          All Rights Reserved.      
            
                  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
